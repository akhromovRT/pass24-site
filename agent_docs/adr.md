# ADR — Архитектурные решения

## Записи

---

### ADR-001: Bricks Builder вместо Elementor

**Дата:** 2026-02-23
**Статус:** Принято

**Контекст:**
Нужен конструктор страниц WordPress с максимальной производительностью. Два кандидата: Bricks Builder и Elementor Pro.

**Решение:**
Выбран Bricks Builder ($79, пожизненная лицензия).

**Обоснование:**
- Bricks генерирует семантически чистый HTML без лишних оберток
- Лучшие показатели Core Web Vitals из всех WP-конструкторов
- Критично для KPI: LCP < 2.5 сек и PageSpeed ≥ 90
- Elementor добавляет ~0.18 сек к времени загрузки (задокументировано в benchmark)
- Одноразовая оплата vs ежегодная подписка Elementor ($59–$999/год)

**Компромиссы:**
- Меньше готовых шаблонов, чем у Elementor
- Меньше экосистема сторонних аддонов

---

### ADR-002: Gravity Forms + Flamix вместо WPForms

**Дата:** 2026-02-23
**Статус:** Принято

**Контекст:**
Нужна форма с нативной интеграцией Битрикс24, условной логикой, многошаговостью и автозахватом UTM.

**Решение:**
Gravity Forms ($59/год) + плагин Flamix Bitrix24.

**Обоснование:**
- Flamix — нативный коннектор к Битрикс24 с автозахватом UTM
- Gravity Forms поддерживает частичные отправки (partial entries) — лид создаётся после Шага 1
- WPForms Pro также поддерживает Flamix, но Gravity Forms более гибкий для сложной логики
- Нет необходимости в кастомном webhook-коде

**Компромиссы:**
- Платный плагин ($59/год)
- Требует дополнительный плагин Flamix

---

### ADR-003: Rank Math Pro вместо Yoast SEO

**Дата:** 2026-02-23
**Статус:** Принято

**Контекст:**
Нужен SEO-плагин с поддержкой Schema, AI-функциями и интеграцией с Google Search Console.

**Решение:**
Rank Math Pro.

**Обоснование:**
- Лучшая поддержка Schema markup из коробки (SoftwareApplication, FAQ, LocalBusiness)
- Встроенные AI-функции для генерации мета-описаний
- Более детальная аналитика ключевых слов прямо в WordPress
- Конкурентный анализ в интерфейсе плагина
- Yoast SEO больше ориентирован на блоги, Rank Math — на сложные B2B-сайты

---

### ADR-004: n8n для автопубликации контента

**Дата:** 2026-02-23
**Статус:** Принято

**Контекст:**
Нужна автоматизация публикации SEO-контента через Claude API в WordPress.

**Решение:**
n8n (self-hosted или облако) → Claude API → WordPress REST API.

**Обоснование:**
- n8n поддерживает все нужные шаги: cron → API → WordPress REST → уведомление в Битрикс24
- Визуальный редактор воркфлоу без кода
- Нативная интеграция с Bitrix24, Pexels, WordPress, OpenAI/Anthropic
- Self-hosted вариант: нет ограничений на количество выполнений
- Все статьи публикуются как черновики — человек проверяет перед публикацией

**Компромиссы:**
- Требует отдельный сервер для self-hosted (или подписка на n8n Cloud)
- Нужно настроить Application Password в WordPress

---

### ADR-005: Архитектура лид-скоринга через n8n + GA4

**Дата:** 2026-02-23
**Статус:** Принято

**Контекст:**
Нужна модель скоринга лидов для автоматической маршрутизации в Битрикс24.

**Решение:**
Поле `UF_CRM_LEAD_SCORE` в Битрикс24 обновляется через n8n-воркфлоу на основе событий GA4 + целей Яндекс.Метрики.

**Обоснование:**
- Поведенческие сигналы (посещение тарифов, использование калькулятора) важнее демографических
- n8n связывает GA4 Measurement Protocol с Битрикс24 REST API без кастомного кода
- Порог 70 баллов для передачи в сделку основан на конверсионной аналитике аналогичных B2B-продуктов
